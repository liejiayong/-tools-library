!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).Scratchers={})}(this,(function(t){"use strict";var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function n(t,e){return t(e={exports:{}},e.exports),e.exports}function r(t){return t&&t.Math==Math&&t}function o(t){try{return!!t()}catch(t){return!0}}function i(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}function a(t){return w.call(t).slice(8,-1)}function c(t){if(null==t)throw TypeError("Can't call method on "+t);return t}function u(t){return E(c(t))}function s(t){return"object"==typeof t?null!==t:"function"==typeof t}function l(t,e){if(!s(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!s(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!s(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!s(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}function f(t,e){return _.call(t,e)}function h(t){return O?I.createElement(t):{}}function p(t){if(!s(t))throw TypeError(t+" is not an object");return t}function d(t,e){try{k(v,t,e)}catch(n){v[t]=e}return e}var v=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof e&&e)||Function("return this")(),g=!o((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),y={}.propertyIsEnumerable,m=Object.getOwnPropertyDescriptor,b={f:m&&!y.call({1:2},1)?function(t){var e=m(this,t);return!!e&&e.enumerable}:y},w={}.toString,x="".split,E=o((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==a(t)?x.call(t,""):Object(t)}:Object,_={}.hasOwnProperty,I=v.document,O=s(I)&&s(I.createElement),T=!g&&!o((function(){return 7!=Object.defineProperty(h("div"),"a",{get:function(){return 7}}).a})),R=Object.getOwnPropertyDescriptor,C={f:g?R:function(t,e){if(t=u(t),e=l(e,!0),T)try{return R(t,e)}catch(t){}if(f(t,e))return i(!b.f.call(t,e),t[e])}},P=Object.defineProperty,S={f:g?P:function(t,e,n){if(p(t),e=l(e,!0),p(n),T)try{return P(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},k=g?function(t,e,n){return S.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t},j="__core-js_shared__",A=v[j]||d(j,{}),N=Function.toString;function D(t){return"Symbol("+(void 0===t?"":t)+")_"+(++$+z).toString(36)}function M(t){return G[t]||(G[t]=D(t))}"function"!=typeof A.inspectSource&&(A.inspectSource=function(t){return N.call(t)});var F,L,U,X=A.inspectSource,Y=v.WeakMap,K="function"==typeof Y&&/native code/.test(X(Y)),B=n((function(t){(t.exports=function(t,e){return A[t]||(A[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.6.4",mode:"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})})),$=0,z=Math.random(),G=B("keys"),V={};if(K){var W=new v.WeakMap,q=W.get,H=W.has,J=W.set;F=function(t,e){return J.call(W,t,e),e},L=function(t){return q.call(W,t)||{}},U=function(t){return H.call(W,t)}}else{var Q=M("state");V[Q]=!0,F=function(t,e){return k(t,Q,e),e},L=function(t){return f(t,Q)?t[Q]:{}},U=function(t){return f(t,Q)}}function Z(t){return"function"==typeof t?t:void 0}function tt(t,e){return arguments.length<2?Z(gt[t])||Z(v[t]):gt[t]&&gt[t][e]||v[t]&&v[t][e]}function et(t){return isNaN(t=+t)?0:(0<t?mt:yt)(t)}function nt(t){return 0<t?bt(et(t),9007199254740991):0}function rt(t,e){var n=et(t);return n<0?wt(n+e,0):xt(n,e)}function ot(t){return function(e,n,r){var o,i=u(e),a=nt(i.length),c=rt(r,a);if(t&&n!=n){for(;c<a;)if((o=i[c++])!=o)return!0}else for(;c<a;c++)if((t||c in i)&&i[c]===n)return t||c||0;return!t&&-1}}function it(t,e){var n,r=u(t),o=0,i=[];for(n in r)!f(V,n)&&f(r,n)&&i.push(n);for(;o<e.length;)f(r,n=e[o++])&&(~Et(i,n)||i.push(n));return i}function at(t,e){for(var n=Rt(e),r=S.f,o=C.f,i=0;i<n.length;i++){var a=n[i];f(t,a)||r(t,a,o(e,a))}}function ct(t,e){var n=St[Pt(t)];return n==jt||n!=kt&&("function"==typeof e?o(e):!!e)}function ut(t,e){var n,r,o,i,a,c=t.target,u=t.global,s=t.stat;if(n=u?v:s?v[c]||d(c,{}):(v[c]||{}).prototype)for(r in e){if(i=e[r],o=t.noTargetGet?(a=Nt(n,r))&&a.value:n[r],!At(u?r:c+(s?".":"#")+r,t.forced)&&void 0!==o){if(typeof i==typeof o)continue;at(i,o)}(t.sham||o&&o.sham)&&k(i,"sham",!0),vt(n,r,i,t)}}function st(t){return Object(c(t))}function lt(t,e,n){var r=l(e);r in t?S.f(t,r,i(0,n)):t[r]=n}function ft(t){return f(Lt,t)||(Mt&&f(Ut,t)?Lt[t]=Ut[t]:Lt[t]=Xt("Symbol."+t)),Lt[t]}var ht,pt,dt={set:F,get:L,has:U,enforce:function(t){return U(t)?L(t):F(t,{})},getterFor:function(t){return function(e){var n;if(!s(e)||(n=L(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}}},vt=n((function(t){var e=dt.get,n=dt.enforce,r=(String+"").split("String");(t.exports=function(t,e,o,i){var a=!!i&&!!i.unsafe,c=!!i&&!!i.enumerable,u=!!i&&!!i.noTargetGet;"function"==typeof o&&("string"!=typeof e||f(o,"name")||k(o,"name",e),n(o).source=r.join("string"==typeof e?e:"")),t!==v?(a?!u&&t[e]&&(c=!0):delete t[e],c?t[e]=o:k(t,e,o)):c?t[e]=o:d(e,o)})(Function.prototype,"toString",(function(){return"function"==typeof this&&e(this).source||X(this)}))})),gt=v,yt=Math.ceil,mt=Math.floor,bt=Math.min,wt=Math.max,xt=Math.min,Et=(ot(!0),ot(!1)),_t=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],It=_t.concat("length","prototype"),Ot={f:Object.getOwnPropertyNames||function(t){return it(t,It)}},Tt={f:Object.getOwnPropertySymbols},Rt=tt("Reflect","ownKeys")||function(t){var e=Ot.f(p(t)),n=Tt.f;return n?e.concat(n(t)):e},Ct=/#|\.prototype\./,Pt=ct.normalize=function(t){return(t+"").replace(Ct,".").toLowerCase()},St=ct.data={},kt=ct.NATIVE="N",jt=ct.POLYFILL="P",At=ct,Nt=C.f,Dt=Array.isArray||function(t){return"Array"==a(t)},Mt=!!Object.getOwnPropertySymbols&&!o((function(){return!(Symbol()+"")})),Ft=Mt&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,Lt=B("wks"),Ut=v.Symbol,Xt=Ft?Ut:Ut&&Ut.withoutSetter||D,Yt=ft("species"),Kt=tt("navigator","userAgent")||"",Bt=v.process,$t=Bt&&Bt.versions,zt=$t&&$t.v8;function Gt(t){if(s(t)){var e=t[qt];return void 0!==e?!!e:Dt(t)}}zt?pt=(ht=zt.split("."))[0]+ht[1]:Kt&&((ht=Kt.match(/Edge\/(\d+)/))&&ht[1]<74||(ht=Kt.match(/Chrome\/(\d+)/))&&(pt=ht[1]));var Vt=pt&&+pt,Wt=ft("species"),qt=ft("isConcatSpreadable"),Ht=9007199254740991,Jt="Maximum allowed index exceeded",Qt=51<=Vt||!o((function(){var t=[];return t[qt]=!1,t.concat()[0]!==t})),Zt=("concat",51<=Vt||!o((function(){var t=[];return(t.constructor={})[Wt]=function(){return{foo:1}},1!==t.concat(Boolean).foo})));function te(){}function ee(t){return"<script>"+t+"</"+ce+">"}ut({target:"Array",proto:!0,forced:!Qt||!Zt},{concat:function(t){var e,n,r,o,i,a,c,u,l=st(this),f=(n=0,Dt(e=l)&&("function"==typeof(r=e.constructor)&&(r===Array||Dt(r.prototype))||s(r)&&null===(r=r[Yt]))&&(r=void 0),new(void 0===r?Array:r)(0===n?0:n)),h=0;for(o=-1,a=arguments.length;o<a;o++)if(Gt(u=-1===o?l:arguments[o])){if(c=nt(u.length),Ht<h+c)throw TypeError(Jt);for(i=0;i<c;i++,h++)i in u&&lt(f,h,u[i])}else{if(Ht<=h)throw TypeError(Jt);lt(f,h++,u)}return f.length=h,f}});var ne,re=Object.keys||function(t){return it(t,_t)},oe=g?Object.defineProperties:function(t,e){p(t);for(var n,r=re(e),o=r.length,i=0;i<o;)S.f(t,n=r[i++],e[n]);return t},ie=tt("document","documentElement"),ae="prototype",ce="script",ue=M("IE_PROTO"),se=function(){try{ne=document.domain&&new ActiveXObject("htmlfile")}catch(t){}var t,e;se=ne?function(t){t.write(ee("")),t.close();var e=t.parentWindow.Object;return t=null,e}(ne):((e=h("iframe")).style.display="none",ie.appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write(ee("document.F=Object")),t.close(),t.F);for(var n=_t.length;n--;)delete se[ae][_t[n]];return se()};V[ue]=!0;var le=Object.create||function(t,e){var n;return null!==t?(te[ae]=p(t),n=new te,te[ae]=null,n[ue]=t):n=se(),void 0===e?n:oe(n,e)},fe=ft("unscopables"),he=Array.prototype;null==he[fe]&&S.f(he,fe,{configurable:!0,value:le(null)}),ut({target:"Array",proto:!0},{fill:function(t,e,n){for(var r=st(this),o=nt(r.length),i=arguments.length,a=rt(1<i?e:void 0,o),c=2<i?n:void 0,u=void 0===c?o:rt(c,o);a<u;)r[a++]=t;return r}}),ut({target:"Date",stat:he[fe].fill=!0},{now:function(){return(new Date).getTime()}});var pe=Date.prototype,de="Invalid Date",ve="toString",ge=pe[ve],ye=pe.getTime;new Date(NaN)+""!=de&&vt(pe,ve,(function(){var t=ye.call(this);return t==t?ge.call(this):de}));var me=[].slice,be={};function we(t){return function(e){var n=c(e)+"";return 1&t&&(n=n.replace(Ie,"")),2&t&&(n=n.replace(Oe,"")),n}}function xe(t){var e,n,r,o,i,a,c,u,s=l(t,!1);if("string"==typeof s&&2<s.length)if(43==(e=(s=Se(s)).charCodeAt(0))||45==e){if(88==(n=s.charCodeAt(2))||120==n)return NaN}else if(48==e){switch(s.charCodeAt(1)){case 66:case 98:r=2,o=49;break;case 79:case 111:r=8,o=55;break;default:return+s}for(a=(i=s.slice(2)).length,c=0;c<a;c++)if((u=i.charCodeAt(c))<48||o<u)return NaN;return parseInt(i,r)}return+s}ut({target:"Function",proto:!0},{bind:Function.bind||function(t){var e=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function");return t}(this),n=me.call(arguments,1),r=function(){var o=n.concat(me.call(arguments));return this instanceof r?function(t,e,n){if(!(e in be)){for(var r=[],o=0;o<e;o++)r[o]="a["+o+"]";be[e]=Function("C,a","return new C("+r.join(",")+")")}return be[e](t,n)}(e,o.length,o):e.apply(t,o)};return s(e.prototype)&&(r.prototype=e.prototype),r}});var Ee=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),e=n instanceof Array}catch(n){}return function(n,r){return p(n),function(t){if(!s(t)&&null!==t)throw TypeError("Can't set "+t+" as a prototype")}(r),e?t.call(n,r):n.__proto__=r,n}}():void 0),_e="[\t\n\v\f\r                　\u2028\u2029\ufeff]",Ie=RegExp("^"+_e+_e+"*"),Oe=RegExp(_e+_e+"*$"),Te={start:we(1),end:we(2),trim:we(3)},Re=Ot.f,Ce=C.f,Pe=S.f,Se=Te.trim,ke="Number",je=v[ke],Ae=je.prototype,Ne=a(le(Ae))==ke;if(At(ke,!je(" 0o1")||!je("0b1")||je("+0x1"))){for(var De,Me=function(t){var e,n,r,i,c,u=arguments.length<1?0:t,l=this;return l instanceof Me&&(Ne?o((function(){Ae.valueOf.call(l)})):a(l)!=ke)?(e=new je(xe(u)),n=l,r=Me,Ee&&"function"==typeof(i=n.constructor)&&i!==r&&s(c=i.prototype)&&c!==r.prototype&&Ee(e,c),e):xe(u)},Fe=g?Re(je):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),Le=0;Le<Fe.length;Le++)f(je,De=Fe[Le])&&!f(Me,De)&&Pe(Me,De,Ce(je,De));vt(v,ke,(Me.prototype=Ae).constructor=Me)}var Ue="".repeat,Xe=1..toFixed,Ye=Math.floor,Ke=function(t,e,n){return 0===e?n:e%2==1?Ke(t,e-1,n*t):Ke(t*t,e/2,n)};ut({target:"Number",proto:!0,forced:!o((function(){Xe.call({})}))},{toFixed:function(t){function e(t,e){for(var n=-1,r=e;++n<6;)f[n]=(r+=t*f[n])%1e7,r=Ye(r/1e7)}function n(t){for(var e=6,n=0;0<=--e;)f[e]=Ye((n+=f[e])/t),n=n%t*1e7}function r(){for(var t=6,e="";0<=--t;)if(""!==e||0===t||0!==f[t]){var n=f[t]+"";e=""===e?n:e+Ue.call("0",7-n.length)+n}return e}var o,i,c,u,s=function(t){if("number"!=typeof t&&"Number"!=a(t))throw TypeError("Incorrect invocation");return+t}(this),l=et(t),f=[0,0,0,0,0,0],h="",p="0";if(l<0||20<l)throw RangeError("Incorrect fraction digits");if(s!=s)return"NaN";if(s<=-1e21||1e21<=s)return s+"";if(s<0&&(h="-",s=-s),1e-21<s)if(i=(o=function(t){for(var e=0,n=t;4096<=n;)e+=12,n/=4096;for(;2<=n;)e+=1,n/=2;return e}(s*Ke(2,69,1))-69)<0?s*Ke(2,-o,1):s/Ke(2,o,1),i*=4503599627370496,0<(o=52-o)){for(e(0,i),c=l;7<=c;)e(1e7,0),c-=7;for(e(Ke(10,c,1),0),c=o-1;23<=c;)n(1<<23),c-=23;n(1<<c),e(1,1),n(2),p=r()}else e(0,i),e(1<<-o,0),p=r()+Ue.call("0",l);return 0<l?h+(l<(u=p.length)?p.slice(0,u-l)+"."+p.slice(u-l):"0."+Ue.call("0",l-u)+p):h+p}});var Be=Object.assign,$e=Object.defineProperty,ze=!Be||o((function(){if(g&&1!==Be({b:1},Be($e({},"a",{enumerable:!0,get:function(){$e(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return 1;var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach((function(t){e[t]=t})),7!=Be({},t)[n]||re(Be({},e)).join("")!=r}))?function(t,e){for(var n=st(t),r=arguments.length,o=1,i=Tt.f,a=b.f;o<r;)for(var c,u=E(arguments[o++]),s=i?re(u).concat(i(u)):re(u),l=s.length,f=0;f<l;)c=s[f++],g&&!a.call(u,c)||(n[c]=u[c]);return n}:Be;function Ge(t,e){return RegExp(t,e)}ut({target:"Object",stat:!0,forced:Object.assign!==ze},{assign:ze});var Ve,We,qe={UNSUPPORTED_Y:o((function(){var t=Ge("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),BROKEN_CARET:o((function(){var t=Ge("^r","gy");return t.lastIndex=2,null!=t.exec("str")}))},He=RegExp.prototype.exec,Je=He,Qe=(We=/b*/g,He.call(Ve=/a/,"a"),He.call(We,"a"),0!==Ve.lastIndex||0!==We.lastIndex),Ze=qe.UNSUPPORTED_Y||qe.BROKEN_CARET;(Qe||Ze)&&(Je=function(t){var e,n,r,o=this,i=Ze&&o.sticky,a=function(){var t=p(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}.call(o),c=o.source,u=0,s=t;return i&&(~(a=a.replace("y","")).indexOf("g")||(a+="g"),s=(t+"").slice(o.lastIndex),0<o.lastIndex&&(!o.multiline||o.multiline&&"\n"!==t[o.lastIndex-1])&&(c="(?: "+c+")",s=" "+s,u++),n=RegExp("^(?:"+c+")",a)),Qe&&(e=o.lastIndex),r=He.call(i?n:o,s),i?r?(r.input=r.input.slice(u),r[0]=r[0].slice(u),r.index=o.lastIndex,o.lastIndex+=r[0].length):o.lastIndex=0:Qe&&r&&(o.lastIndex=o.global?r.index+r[0].length:e),r});var tn=Je;function en(t,e,n,r){var i=ft(t),a=!o((function(){var e={};return e[i]=function(){return 7},7!=""[t](e)})),c=a&&!o((function(){var e=!1,n=/a/;return"split"===t&&((n={constructor:{}}).constructor[an]=function(){return n},n.flags="",n[i]=/./[i]),n.exec=function(){return e=!0,null},n[i](""),!e}));if(!a||!c||"replace"===t&&(!cn||sn)||"split"===t&&!ln){var u=/./[i],s=n(i,""[t],(function(t,e,n,r,o){return e.exec===tn?a&&!o?{done:!0,value:u.call(e,n,r)}:{done:!0,value:t.call(n,e,r)}:{done:!1}}),{REPLACE_KEEPS_$0:!0,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:sn}),l=s[1];vt(String.prototype,t,s[0]),vt(RegExp.prototype,i,2==e?function(t,e){return l.call(t,this,e)}:function(t){return l.call(t,this)})}r&&k(RegExp.prototype[i],"sham",!0)}function nn(t){return function(e,n){var r,o,i=c(e)+"",a=et(n),u=i.length;return a<0||u<=a?t?"":void 0:(r=i.charCodeAt(a))<55296||56319<r||a+1===u||(o=i.charCodeAt(a+1))<56320||57343<o?t?i[0|a]:r:t?i.slice(a,a+2):o-56320+(r-55296<<10)+65536}}function rn(t,e,n){return e+(n?fn(t,e).length:1)}function on(t,e){var n=t.exec;if("function"==typeof n){var r=n.call(t,e);if("object"!=typeof r)throw TypeError("RegExp exec method returned something other than an Object or null");return r}if("RegExp"!==a(t))throw TypeError("RegExp#exec called on incompatible receiver");return tn.call(t,e)}ut({target:"RegExp",proto:!0,forced:/./.exec!==tn},{exec:tn});var an=ft("species"),cn=!o((function(){return/./.exec=function(){var t=[];return t.groups={a:"7"},t}})),un=ft("replace"),sn=!!/./[un]&&""===/./[un]("a","$0"),ln=!o((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2!==n.length||"a"!==n[0]||"b"!==n[1]})),fn=(nn(!1),nn(!0));en("match",1,(function(t,e,n){return[function(e){var n=c(this),r=null==e?void 0:e[t];return void 0!==r?r.call(e,n):RegExp(e)[t](n+"")},function(t){var r=n(e,t,this);if(r.done)return r.value;var o=p(t),i=this+"";if(!o.global)return on(o,i);for(var a,c=o.unicode,u=[],s=o.lastIndex=0;null!==(a=on(o,i));){var l=a[0]+"";(u[s]=l)||(o.lastIndex=rn(i,nt(o.lastIndex),c)),s++}return 0===s?null:u}]}));var hn=Math.max,pn=Math.min,dn=Math.floor,vn=/\$([$&'`]|\d\d?|<[^>]*>)/g,gn=/\$([$&'`]|\d\d?)/g;function yn(t){return function(e,n){var r=2<arguments.length,o=r?mn.call(arguments,2):void 0;return t(r?function(){("function"==typeof e?e:Function(e)).apply(this,o)}:e,n)}}en("replace",2,(function(t,e,n,r){var o=r.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,i=r.REPLACE_KEEPS_$0,a=o?"$":"$0";return[function(n,r){var o=c(this),i=null==n?void 0:n[t];return void 0!==i?i.call(n,o,r):e.call(o+"",n,r)},function(t,r){if(!o&&i||"string"==typeof r&&!~r.indexOf(a)){var c=n(e,t,this,r);if(c.done)return c.value}var s=p(t),l=this+"",f="function"==typeof r;f||(r+="");var h=s.global;if(h){var d=s.unicode;s.lastIndex=0}for(var v=[];;){var g=on(s,l);if(null===g)break;if(v.push(g),!h)break;g[0]+""||(s.lastIndex=rn(l,nt(s.lastIndex),d))}for(var y,m="",b=0,w=0;w<v.length;w++){for(var x=(g=v[w])[0]+"",E=hn(pn(et(g.index),l.length),0),_=[],I=1;I<g.length;I++)_.push(void 0===(y=g[I])?y:y+"");var O=g.groups;if(f){var T=[x].concat(_,E,l);void 0!==O&&T.push(O);var R=r.apply(void 0,T)+""}else R=u(x,l,E,_,O,r);E<b||(m+=l.slice(b,E)+R,b=E+x.length)}return m+l.slice(b)}];function u(t,n,r,o,i,a){var c=r+t.length,u=o.length,s=gn;return void 0!==i&&(i=st(i),s=vn),e.call(a,s,(function(e,a){var s;switch(a[0]){case"$":return"$";case"&":return t;case"`":return n.slice(0,r);case"'":return n.slice(c);case"<":s=i[a.slice(1,-1)];break;default:var l=+a;if(0==l)return e;if(u<l){var f=dn(l/10);return 0===f||u<f?e:void 0===o[f-1]?a[1]:o[f-1]+a[1]}s=o[l-1]}return void 0===s?"":s}))}}));var mn=[].slice;ut({global:!0,bind:!0,forced:/MSIE .\./.test(Kt)},{setTimeout:yn(v.setTimeout),setInterval:yn(v.setInterval)});var bn=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")};function wn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var xn;function En(t){var e=document.createElement("div"),n=function(){for(var t in{webkit:"webkitTransform",Moz:"MozTransform",O:"OTransform",ms:"msTransform",standard:"transform"})if("undefined"!==e[t])return t;return!1}();return!1!==n&&("standard"===n?t:n+t[0].toUpperCase()+t.substr(1))}var _n="ontouchstart"in window;document.createTouch||(document.createTouch=function(t,e,n,r,o,i,a){return new In(e,n,{pageX:r,pageY:o,screenX:i,screenY:a,clientX:r-window.pageXOffset,clientY:o-window.pageYOffset},0,0)}),document.createTouchList||(document.createTouchList=function(){for(var t=On(),e=0;e<arguments.length;e++)t[e]=arguments[e];return t.length=arguments.length,t});var In=function(t,e,n,r,o){r=r||0,o=o||0,this.identifier=e,this.target=t,this.clientX=n.clientX+r,this.clientY=n.clientY+o,this.screenX=n.screenX+r,this.screenY=n.screenY+o,this.pageX=n.pageX+r,this.pageY=n.pageY+o};function On(){var t=[];return t.item=function(t){return this[t]||null},t.identifiedTouch=function(t){return this[t+1]||null},t}function Tn(t){return function(e){var n,r,o;1===e.which&&("mousedown"!==e.type&&xn&&(!xn||xn.dispatchEvent)||(xn=e.target),n=t,r=e,(o=document.createEvent("Event")).initEvent(n,!0,!0),o.altKey=r.altKey,o.ctrlKey=r.ctrlKey,o.metaKey=r.metaKey,o.shiftKey=r.shiftKey,o.touches=Cn(r),o.targetTouches=Cn(r),o.changedTouches=Rn(r),xn.dispatchEvent(o),"mouseup"===e.type&&(xn=null))}}function Rn(t){var e=On();return e.push(new In(xn,1,t,0,0)),e}function Cn(t){return"mouseup"===t.type?On():Rn(t)}function Pn(){!function(){for(var t=[window,document.documentElement],e=["ontouchstart","ontouchmove","ontouchcancel","ontouchend"],n=0;n<t.length;n++)for(var r=0;r<4;r++)t[n]&&void 0===t[n][e[r]]&&(t[n][e[r]]=null)}(),window.addEventListener("mousedown",Tn("touchstart"),!0),window.addEventListener("mousemove",Tn("touchmove"),!0),window.addEventListener("mouseup",Tn("touchend"),!0)}Pn.multiTouchOffset=75,_n||new Pn,t.Scratchers=function(){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,n=1<arguments.length?arguments[1]:void 0;bn(this,t),this.config=Object.assign({},{width:300,height:150,awardImg:"",awardColor:"#ffffff",awardMsg:"特等奖",font:"bold 30px Arial",fontColor:"#ffffff",coverImg:"",coverColor:"#ccc",radius:28,duration:2e3,percent:60,unit:"px",containerClass:"jy-scraping-container",mode:"default",onReady:function(){console.log("scratchers ready")},onProgress:function(t){console.log("scratchers progress",t)},onSuccess:function(){console.log("scratchers done")}},n),this.el=e,this.parent=null,this.cCover=null,this.cDisplayer=null,this.width=this.config.width,this.height=this.config.height,this.point={left:0,top:0,prevX:0,prevY:0},this.pixelRatio=1,this.isDown=!1,this.isReady=!1,this.isDone=!1,this.lock=!0,this._init()}return function(t,e,n){e&&wn(t.prototype,e),n&&wn(t,n)}(t,[{key:"setLock",value:function(t){if("boolean"!=typeof t)return Error(" the paramtar must be Boolean false or true");this.lock=t}},{key:"setCover",value:function(t){var e=0<arguments.length&&void 0!==t?t:this.config.coverImg,n=this.cCover,r=n.ctx,o=n.widthReal,i=n.heightReal;e?this.loadImg(e,(function(t){var e=t.image,n=t.width,a=t.height;r.save(),r.globalCompositeOperation="source-over",r.drawImage(e,0,0,n,a,0,0,o,i),r.restore()}),(function(){console.log("the cover image load error.")})):(r.save(),r.globalCompositeOperation="source-over",r.fillStyle=this.config.coverColor,r.fillRect(0,0,o,i),r.restore()),r.canvas.style.opacity="1"}},{key:"setAward",value:function(t){var e=0<arguments.length&&void 0!==t?t:{url:this.config.awardImg,msg:this.config.awardMsg},n=this,r=this.cDisplayer,o=r.ctx,i=r.widthReal,a=r.heightReal,c=this.config.awardColor,u=e.url;this.config.awardMsg=e.msg,this.config.awardImg=u,"transparent"!==c&&(o.save(),o.fillStyle=c,o.fillRect(0,0,i,a),o.restore()),u?n.loadImg(u,(function(t){o.drawImage(t.image,0,0,t.width,t.height,0,0,i,a),n._drawMsg()}),(function(){console.log("the award image load error.")})):n._drawMsg()}},{key:"_drawMsg",value:function(){var t=this.config,e=t.awardMsg,n=t.fontColor;if(e){var r=this.cDisplayer,o=r.ctx,i=r.widthReal,a=r.heightReal,c=this.fontSize;o.font=this.font;var u=(i-o.measureText(e).width)/2,s=(a-c)/2;o.fillStyle=n,o.textAlign="start",o.textBaseline="top",o.fillText(e,u,s,i)}}},{key:"loadImg",value:function(t,e,n){var r=0<arguments.length&&void 0!==t?t:"",o=1<arguments.length&&void 0!==e?e:function(){},i=2<arguments.length&&void 0!==n?n:function(){},a=new Image;a.setAttribute("crossorigin","anonymous"),a.src="".concat(r,"?timestamp=").concat(Date.now()),a.onload=function(){o({image:a,width:a.width,height:a.height})},a.onerror=function(){i(),console.error("Image loading fail.")}}},{key:"clear",value:function(){var t=this,e=this.cCover.canvas,n=this.config.duration;if(0>n)this._clearAll();else{var r=En("transition");e.style[r]="all ".concat(n/1e3,"s linear"),e.style.opacity="0",setTimeout((function(){t._clearAll()}),n)}}},{key:"_clearAll",value:function(){var t=this.cCover,e=t.ctx,n=t.canvas,r=En("transition");e.fillRect(0,0,this.width,this.height),this.isDone=!(n.style[r]="none"),this.lock=!0,this.config.onSuccess()}},{key:"_complete",value:function(){var t=this.config.percent,e=this._pixelPercent();e<t||(this.isDone=!0,this.clear()),this.config.onProgress(e)}},{key:"_pixelPercent",value:function(){for(var t=this.cCover.ctx.getImageData(0,0,this.width,this.height).data,e=t.length,n=[],r=0;r<e;r+=4)t[r+3]<128&&n.push(t[r+3]);return(n.length/(e/4)*100).toFixed(2)}},{key:"_drawPoint",value:function(t){var e=t.x,n=t.y,r=t.radius,o=this.cCover.ctx;o.save(),"default"===this.config.mode&&o.beginPath(),o.arc(e,n,r,0,2*Math.PI),"default"===this.config.mode&&o.closePath(),o.fill(),o.restore()}},{key:"_getPostion",value:function(t){if(!t||t&&!t.clientX)return{x:0,y:0,radius:0};var e=this.config.radius,n=this.cCover.pixelRatio,r=this.point,o=r.top,i=Math.abs(t.clientX-r.left)*n,a=Math.abs(t.clientY-o)*n;return i=i.toFixed(2),a=a.toFixed(2),this.isDown||(this.point.prevX=i,this.point.prevY=a),{x:i,y:a,radius:e}}},{key:"_event",value:function(){var t=this.cCover.canvas;t.addEventListener("touchstart",this._eventDown.bind(this),{passive:!1}),t.addEventListener("touchmove",this._eventMove.bind(this),{passive:!1}),t.addEventListener("touchend",this._eventUp.bind(this),{passive:!1}),t.addEventListener("touchcancel",this._eventUp.bind(this),{passive:!1}),t.addEventListener("touchleave",this._eventUp.bind(this),{passive:!1})}},{key:"_eventUp",value:function(t){t.preventDefault(),this.lock||(this.isDown=!(this.cCover.ctx.globalCompositeOperation="source-over"))}},{key:"_eventDown",value:function(t){if(t.preventDefault(),!this.lock){this.isReady||(this.isReady=!0,this.config.onReady());var e=this.cCover.ctx;"sector"===this.config.mode&&e.beginPath(),e.globalCompositeOperation="destination-out";var n=this.parent.getBoundingClientRect();this.point.left=n.left,this.point.top=n.top,this._drawPoint(this._getPostion(t.changedTouches[0])),this.isDown=!0}}},{key:"_eventMove",value:function(t){t.preventDefault(),this.lock||this.isDown&&!this.isDone&&(this._drawPoint(this._getPostion(t.changedTouches[0])),this._complete())}},{key:"_createCanvas",value:function(){var t,e=document.createElement("canvas"),n=e.getContext("2d"),r=this.width,o=this.height,i=(t=n,(window.devicePixelRatio||1)/(t.backingStorePixelRatio||t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1)),a=r*i,c=o*i;return n.scale(i,i),e.setAttribute("width",a),e.setAttribute("height",c),e.style.cssText="position:absolute;top:0;left:0;width:100%;height:100%",{canvas:e,ctx:n,width:r,height:o,pixelRatio:this.pixelRatio=i,widthReal:a,heightReal:c}}},{key:"_createDOM",value:function(){var t,e,n=this.config,r=n.width,o=n.height,i=n.unit,a=n.containerClass,c=this.el,u=document.createElement("div");u.style.cssText="position:relative;margin:0 auto;text-align:center;width:".concat(r).concat(i,";height:").concat(o).concat(i,";overflow:hidden;"),u.className=a,t=this._createCanvas(),e=this._createCanvas(),u.appendChild(e.canvas),u.appendChild(t.canvas),c.appendChild(u),this.parent=u,this.cCover=t,this.cDisplayer=e}},{key:"_params",value:function(){var t=this.config.font,e=t.match(/(\d+)px/g)[0];e=+(e=e.replace("px","")*this.pixelRatio).toFixed(1),this.font=t.replace(/(\d+)px/g,"".concat(e,"px")),this.fontSize=e}},{key:"_init",value:function(){if(!this.el)return Error("the.el is not found.");this._createDOM(),this.setAward(),this.setCover(),this._event(),this._params()}}]),t}(),Object.defineProperty(t,"__esModule",{value:!0})}));
